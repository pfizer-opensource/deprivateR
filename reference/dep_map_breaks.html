<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculating Map Breaks — dep_map_breaks • deprivateR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculating Map Breaks — dep_map_breaks"><meta property="og:description" content='Create "bins" for choropleth maps creating using either
    ggplot2 or leaflet. The function can create the bins
    automatically or will accept pre-specified breaks.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">deprivateR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pfizer-opensource/deprivateR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculating Map Breaks</h1>
    <small class="dont-index">Source: <a href="https://github.com/pfizer-opensource/deprivateR/blob/main/R/dep_map_breaks.R" class="external-link"><code>R/dep_map_breaks.R</code></a></small>
    <div class="hidden name"><code>dep_map_breaks.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create "bins" for choropleth maps creating using either
    <code>ggplot2</code> or <code>leaflet</code>. The function can create the bins
    automatically or will accept pre-specified breaks.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dep_map_breaks</span><span class="op">(</span><span class="va">.data</span>, <span class="va">var</span>, <span class="va">new_var</span>, <span class="va">classes</span>, <span class="va">style</span>, <span class="va">breaks</span>,</span>
<span>    sig_digits <span class="op">=</span> <span class="fl">2</span>, return <span class="op">=</span> <span class="st">"col"</span>, show_warnings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A data object, either sf, tibble, or data.frame</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>Variable breaks should be based on, can be quoted or unquoted</p></dd>


<dt id="arg-new-var">new_var<a class="anchor" aria-label="anchor" href="#arg-new-var"></a></dt>
<dd><p>Optional name of new variable to store breaks in, can be quoted
or unquoted. This is required if you are returning a column, but can be
omitted if you are returning breaks instead of a column.</p></dd>


<dt id="arg-classes">classes<a class="anchor" aria-label="anchor" href="#arg-classes"></a></dt>
<dd><p>Optional integer scalar; count of the number of classes to create.
If you are supplying breaks manually, this can be omitted.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>String scalar; one of the classes supported by <code><a href="https://r-spatial.github.io/classInt/reference/classIntervals.html" class="external-link">classInt::classIntervals()</a></code>.
"jenks" is the ArcGIS default. "quantile" and "fisher" are better
alternatives. As with <code>classes</code>, this can be omitted if you are
supplying breaks manually.</p></dd>


<dt id="arg-breaks">breaks<a class="anchor" aria-label="anchor" href="#arg-breaks"></a></dt>
<dd><p>Optional numeric vector if you want to pre-specify the cut
points for your breaks. Provide the lower and upper bounds of your
distribution. Any values supplied in between the bounds will be the
upper bound of individual bins.</p></dd>


<dt id="arg-sig-digits">sig_digits<a class="anchor" aria-label="anchor" href="#arg-sig-digits"></a></dt>
<dd><p>Integer; how many significant digits should be applied when
calculating breaks and constructing labels?</p></dd>


<dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>String scalar; one of either <code>"col"</code> (default) or
<code>"breaks"</code>. The default behavior adds a factor containing the bins
to the data object to facilitate mapping. Specifying <code>"breaks"</code>
will return the calculated breaks instead, which can be modified and
passed to the <code>breaks</code> argument later in a script to make the
final map.</p></dd>


<dt id="arg-show-warnings">show_warnings<a class="anchor" aria-label="anchor" href="#arg-show-warnings"></a></dt>
<dd><p>Logical scalar; if <code>TRUE</code>, warnings created by
<code><a href="https://r-spatial.github.io/classInt/reference/classIntervals.html" class="external-link">classInt::classIntervals()</a></code> if <code>NA</code> values are identified while
findings classes.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Either a data object (if <code>return</code> is <code>"col"</code>) or a vector
    of breaks (if <code>return</code> is <code>"breaks"</code>). If a data object is
    returned, the new column will be placed directly after the input variable
    specified in <code>var</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># prep data</span></span></span>
<span class="r-in"><span><span class="co">## load sample data</span></span></span>
<span class="r-in"><span><span class="va">ndi_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="dep_sample_data.html">dep_sample_data</a></span><span class="op">(</span>index <span class="op">=</span> <span class="st">"ndi_m"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## calculate NDI with sample data</span></span></span>
<span class="r-in"><span><span class="va">ndi_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="dep_calc_index.html">dep_calc_index</a></span><span class="op">(</span><span class="va">ndi_m</span>, geography <span class="op">=</span> <span class="st">"county"</span>, index <span class="op">=</span> <span class="st">"ndi_m"</span>, year <span class="op">=</span> <span class="fl">2022</span>,</span></span>
<span class="r-in"><span>  return_percentiles <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Warning: The proportion of variance explained by PC1 is less than 0.50.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate breaks using a built-in algorithm</span></span></span>
<span class="r-in"><span><span class="fu">dep_map_breaks</span><span class="op">(</span><span class="va">ndi_m</span>, var <span class="op">=</span> <span class="st">"NDI_M"</span>, new_var <span class="op">=</span> <span class="st">"map_breaks"</span>, classes <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  style <span class="op">=</span> <span class="st">"fisher"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 115 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    GEOID NAME                        YEAR NDI_M map_breaks    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 29001 Adair County, Missouri      <span style="text-decoration: underline;">2</span>022 63.2  60.10 - 80.26 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 29003 Andrew County, Missouri     <span style="text-decoration: underline;">2</span>022  6.14 0.00 - 19.74  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 29005 Atchison County, Missouri   <span style="text-decoration: underline;">2</span>022 24.6  19.75 - 39.91 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 29007 Audrain County, Missouri    <span style="text-decoration: underline;">2</span>022 58.8  39.92 - 60.09 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 29009 Barry County, Missouri      <span style="text-decoration: underline;">2</span>022 59.6  39.92 - 60.09 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 29011 Barton County, Missouri     <span style="text-decoration: underline;">2</span>022 92.1  80.27 - 100.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 29013 Bates County, Missouri      <span style="text-decoration: underline;">2</span>022 83.3  80.27 - 100.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 29015 Benton County, Missouri     <span style="text-decoration: underline;">2</span>022 68.4  60.10 - 80.26 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 29017 Bollinger County, Missouri  <span style="text-decoration: underline;">2</span>022 78.9  60.10 - 80.26 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 29019 Boone County, Missouri      <span style="text-decoration: underline;">2</span>022 14.0  0.00 - 19.74  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 105 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use manually specified breaks</span></span></span>
<span class="r-in"><span><span class="co">## set breaks</span></span></span>
<span class="r-in"><span><span class="va">breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">25</span>, <span class="fl">50</span>, <span class="fl">75</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">ndi_m</span><span class="op">$</span><span class="va">NDI_M</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## calculate breaks</span></span></span>
<span class="r-in"><span><span class="fu">dep_map_breaks</span><span class="op">(</span><span class="va">ndi_m</span>, var <span class="op">=</span> <span class="st">"NDI_M"</span>, new_var <span class="op">=</span> <span class="st">"map_breaks"</span>, breaks <span class="op">=</span> <span class="va">breaks</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 115 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    GEOID NAME                        YEAR NDI_M map_breaks    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 29001 Adair County, Missouri      <span style="text-decoration: underline;">2</span>022 63.2  50.01 - 75.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 29003 Andrew County, Missouri     <span style="text-decoration: underline;">2</span>022  6.14 0.00 - 25.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 29005 Atchison County, Missouri   <span style="text-decoration: underline;">2</span>022 24.6  0.00 - 25.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 29007 Audrain County, Missouri    <span style="text-decoration: underline;">2</span>022 58.8  50.01 - 75.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 29009 Barry County, Missouri      <span style="text-decoration: underline;">2</span>022 59.6  50.01 - 75.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 29011 Barton County, Missouri     <span style="text-decoration: underline;">2</span>022 92.1  75.01 - 100.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 29013 Bates County, Missouri      <span style="text-decoration: underline;">2</span>022 83.3  75.01 - 100.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 29015 Benton County, Missouri     <span style="text-decoration: underline;">2</span>022 68.4  50.01 - 75.00 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 29017 Bollinger County, Missouri  <span style="text-decoration: underline;">2</span>022 78.9  75.01 - 100.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 29019 Boone County, Missouri      <span style="text-decoration: underline;">2</span>022 14.0  0.00 - 25.00  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 105 more rows</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://pfizer-opensource.github.io" class="external-link">Christopher Prener</a>, Timothy Wiemken.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

